<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- Google Analytics -->
  

  <!-- Baidu Tongji -->
  

  <!-- Baidu Push -->
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc">
  <meta name="baidu-site-verification" content="PpzM9WxOJU">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="做一山花易，成为海树难。">
  <meta name="keyword" content="haishu,海树,owenlee,Blog">
  <link rel="shortcut icon" href="/img/avatar/fish.png">

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/widget.css">
    <link rel="stylesheet" href="/css/rocket.css">
    <link rel="stylesheet" href="/css/signature.css">
    <link rel="stylesheet" href="/css/catalog.css">
    <link rel="stylesheet" href="/css/livemylife.css">

    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css">
      <!-- top end -->
    

    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css">
      <!-- viewer end -->
    

    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css">
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css">
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://yoursite.com/2020/07/05/kotlin-learning-10-higher-older-function-lambda/">
  <title>
    
      Kotlin 修炼手册（10）高阶函数与 Lambda - 海树
    
  </title>
</head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">海树</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          

          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('');
      --intro-header-background-image-url-page: url('/img/header_img/archive_bg2.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/archive_bg2.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url(''); */
      
    }

    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Kotlin" title="Kotlin">Kotlin</a>
              
            </div>
            <h1>Kotlin 修炼手册（10）高阶函数与 Lambda</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by Owen Lee on
              2020-07-05
            </span>


            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <p>这篇文章来介绍一下函数的进阶知识。</p>
<p>包括以下内容：</p>
<ol>
<li>函数类型</li>
<li>高阶函数</li>
<li>局部函数</li>
<li>匿名函数</li>
<li>Lambda表达式</li>
</ol>
<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><p>在 Kotlin 中，函数是一等公民，函数也有自己的类型。函数可以用来定义变量，可以作为函数的形参，还可以作为函数的返回值。</p>
<p>Kotlin 中每个函数都有自己特定的类型，函数的类型由<code>形参列表</code>，<code>-&gt;</code>，和<code>返回值类型</code>组成。</p>
<p>例如：</p>
<pre><code class="kotlin">fun add(a: Int, b: Int) : Int{
    return a + b
}</code></pre>
<p>上面这个函数的类型是：<code>(Int, Int) -&gt; Int</code></p>
<pre><code class="kotlin">fun print(str: String) : Unit{
    println(str)
}</code></pre>
<p>上面这个函数的类型是：<code>(String) -&gt; Unit</code> 或 <code>(String)</code>（返回值为 Unit 时，可以省略）</p>
<h4 id="使用函数定义变量"><a href="#使用函数定义变量" class="headerlink" title="使用函数定义变量"></a>使用函数定义变量</h4><pre><code class="kotlin">fun add(a: Int, b: Int): Int {
    return a + b
}

fun time(a: Int, b: Int): Int {
    return a * b
}

fun main() {
    // 定义一个变量，类型是函数类型
    var myFunc: (Int, Int) -&gt; Int
    // 把add函数赋值给myFunc变量
    myFunc = ::add
    println(&quot;add():${myFunc(1, 2)}&quot;)
    // 把time函数赋值给myFunc变量
    myFunc = ::time
    println(&quot;time():${myFunc(1, 2)}&quot;)
}
// 运行结果
add():3
time():2</code></pre>
<p>上述代码中先后使用了 <code>::</code> 将 add 和time 函数赋值给 myFunc 变量，只要函数的类型和变量的类型一致，就可以赋值成功。</p>
<p>什么是 <code>::</code> 呢，它被称为函数引用（Function Reference），在函数名前添加 <code>::</code>，就不表示这个函数本身，而是变成 <strong>这个函数类型的一个对象</strong>，这个对象和函数拥有同样的功能。</p>
<blockquote>
<p>Kotlin 里「函数可以作为参数」这件事的本质，是函数在 Kotlin 里可以作为对象存在——因为只有对象才能被作为参数传递啊。赋值也是一样道理，只有对象才能被赋值给变量啊。但 Kotlin 的函数本身的性质又决定了它没办法被当做一个对象。那怎么办呢？Kotlin 的选择是，那就创建一个和函数具有相同功能的对象。怎么创建？使用双冒号。(from 扔物线)</p>
</blockquote>
<h4 id="函数作为形参"><a href="#函数作为形参" class="headerlink" title="函数作为形参"></a>函数作为形参</h4><p>有时定义函数，部分逻辑不确定，希望动态传入这个处理逻辑，这时就可以定义函数类型作为形参。这样就可以在调用这个函数的时候传入不同的函数，执行不同的逻辑。</p>
<pre><code class="kotlin">// 函数第二个参数是(Int) -&gt; Int的函数类型
fun map(data: Array&lt;Int&gt;, fn: (Int) -&gt; Int): Array&lt;Int&gt; {
    var result = Array&lt;Int&gt;(data.size, { 0 })
    for (i in data.indices) {
        // 将数组中每个元素作为fn的参数，得到对应的返回值
        result[i] = fn(data[i])
    }
    return result
}

// 定义两个具体函数
fun squre(n: Int): Int {
    return n * n
}
fun cube(n: Int): Int {
    return n * n * n
}

fun main() {
    println(&quot;原数组：&quot;)
    val a = arrayOf(1, 2, 3, 4)
    println(a.contentToString())
    println(&quot;对元素调用squre()&quot;)
    println(map(a, ::squre).contentToString())
    println(&quot;对元素调用cube()&quot;)
    println(map(a, ::cube).contentToString())
}
// 运行结果
原数组：
[1, 2, 3, 4]
对元素调用squre()
[1, 4, 9, 16]
对元素调用cube()
[1, 8, 27, 64]</code></pre>
<h4 id="函数作为返回值"><a href="#函数作为返回值" class="headerlink" title="函数作为返回值"></a>函数作为返回值</h4><p>Kotlin 中可以将其他函数作为函数的返回值。</p>
<pre><code class="kotlin">// 定义三个函数
fun squre(n: Int): Int {
    return n * n
}
fun cube(n: Int): Int {
    return n * n * n
}
fun add(n: Int): Int {
    return n + 1
}

// 根据不同的 type 返回不同的函数
fun getFunc(type: String): (Int) -&gt; Int {
    return when (type) {
        &quot;squre&quot; -&gt; ::squre
        &quot;cube&quot; -&gt; ::cube
        else -&gt; ::add
    }
}

fun main() {
    var myFunc = getFunc(&quot;cube&quot;)
    println(myFunc(3))
}
// 运行结果
27</code></pre>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p>类似于上面示例中的 map、getFunc 这种函数，它接受一个函数类型作为参数，或者返回值的类型是一个函数类型，就被称为高阶函数。高阶函数和普通函数其实没有任何区别，它的特点在于允许让函数类型的参数来决定函数的执行逻辑。</p>
<h3 id="局部函数"><a href="#局部函数" class="headerlink" title="局部函数"></a>局部函数</h3><p>除了在 top-level（kotlin 文件中）、类中定义函数，Kotlin 还可以在函数内部定义函数，这种函数被称为局部函数（类似局部变量）。</p>
<p>默认情况下，局部函数对外部是隐藏的，局部函数只能在其封闭（enclosing）函数内被调用。这个封闭函数也可以返回局部函数，以便在其他作用域中调用。</p>
<p>示例：</p>
<pre><code class="kotlin">fun getFunc(type: String): (Int) -&gt; Int {
    // 在函数内定义三个函数
    fun squre(n: Int): Int {
        return n * n
    }
    fun cube(n: Int): Int {
        return n * n * n
    }
    fun add(n: Int): Int {
        return n + 1
    }
    // 根据不同的type返回不同的函数
    return when (type) {
        &quot;squre&quot; -&gt; ::squre
        &quot;cube&quot; -&gt; ::cube
        else -&gt; ::add
    }
}

fun main() {
    var myFunc = getFunc(&quot;cube&quot;)
    println(myFunc(3))
}
// 运行结果
27</code></pre>
<h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p>传一个函数类型的参数、或者把一个函数类型的对象赋值给变量，除了使用 <code>::</code>，还可以直接写这个函数，上面getFunc可以改写成：</p>
<pre><code class="kotlin">fun getFunc(type: String): (Int) -&gt; Int {
    // 根据不同的type返回不同的函数
    return when (type) {
        &quot;squre&quot; -&gt; fun squre(n: Int): Int {
            return n * n
        }
        &quot;cube&quot; -&gt; fun cube(n: Int): Int {
            return n * n * n
        }
        else -&gt; fun add(n: Int): Int {
            return n + 1
        }
    }
}

fun main() {
    var myFunc = getFunc(&quot;squre&quot;)
    println(myFunc(3))
}
// 运行结果
9</code></pre>
<p>这样写的话，函数名就没有用了，所以可以将函数名省略：</p>
<pre><code class="kotlin">fun getFunc(type: String): (Int) -&gt; Int {
    // 根据不同的 type 返回不同的函数
    return when (type) {
        &quot;squre&quot; -&gt; fun(n: Int): Int {
            return n * n
        }
        &quot;cube&quot; -&gt; fun(n: Int): Int {
            return n * n * n
        }
        else -&gt; fun(n: Int): Int {
            return n + 1
        }
    }
}

fun main() {
    var myFunc = getFunc(&quot;squre&quot;)
    println(myFunc(3))
}
// 运行结果
9</code></pre>
<p>Kotlin 的匿名函数本质上不是函数，而是个<strong>对象</strong>，一个<strong>函数类型的对象</strong>。它和双冒号加函数名是一类东西，和函数不是。</p>
<h3 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h3><p>除了使用匿名函数，也可以使用 Lambda 表达式来代替。</p>
<p>Lambda 表达式，是函数式编程思想的代表，我们先来了解下函数式编程的相关概念，再来看 Kotlin 中 Lambda 表达式的语法。</p>
<h4 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h4><p>函数式编程是一种编程典范，和数学中函数的概念一致，避免使用程序状态和易变对象。函数式编程的特点有：</p>
<ol>
<li>函数是“第一等公民”</li>
</ol>
<p>是指函数和其他数据类型处于平等地位，不仅有传统函数的使用方式，还可以将作为变量赋值，作为函数的形参，作为函数的返回值。函数可以作为参数进行传递，意味着可以把处理逻辑参数化，从外界传入，让程序更灵活。</p>
<ol start="2">
<li>没有副作用</li>
</ol>
<p>副作用是指函数内部和外部的互动（引用外界变量的值，修改外界变量的值）。函数式编程要求函数保持独立，尤其不能修改外部变量的值。</p>
<ol start="3">
<li>引用透明</li>
</ol>
<p>函数的运行不依赖于外部变量或”状态”，只依赖于输入的参数，任何时候只要参数相同，引用函数所得到的返回值总是相同的。这里强调了一点：<code>输入不变则输出也不变</code>，就像数学函数里面的 y=f(x),只要输入的 x 一样，那 y 肯定也是一样的。</p>
<h4 id="Kotlin-中的-Lambda-表达式"><a href="#Kotlin-中的-Lambda-表达式" class="headerlink" title="Kotlin 中的 Lambda 表达式"></a>Kotlin 中的 Lambda 表达式</h4><p>Kotlin 中 Lambda 表达式的语法结构如下：</p>
<pre><code>{ (形参列表) -&gt;
    // 零条到多条表达式语句
}</code></pre><p>Lambda 表达式，表现上是一种有输入输出的代码块，本质上和匿名函数一样，是一个<strong>函数类型的对象</strong>。Lambda 表达式有以下几点特性：</p>
<ol>
<li>Lambda 表达式总是被大括号包裹着，由形参列表（可以为空），-&gt;，执行体组成。</li>
<li>定义 Lambda 表达式不需要 fun 关键字，也不要指定函数名（因为它不是函数）</li>
</ol>
<p>下面以 Android 中大家都比较熟悉的点击事件 setOnClickListener 为例来一步步介绍 Lambda 表达式的更多特性：</p>
<p>首先在 Kotlin 中我们不用使用接口了，而是可以直接使用函数类型来定义点击事件：</p>
<pre><code class="kotlin">class View {
    lateinit var onClick: (View)-&gt; Unit
    // 接收一个(View) -&gt; Unit类型的参数
    fun setOnClickListener(onClick: (View) -&gt; Unit) {
        this.onClick = onClick
    }
}
fun main(){
    val v = View()
    v.setOnClickListener({view: View -&gt;
        println(&quot;click view&quot;)
        view.setVisibility(GONE)
    })
    v.onClick(v)
}
// 执行结果
click view</code></pre>
<p>其中使用Lambda部分是这样的：</p>
<pre><code class="kotlin">v.setOnClickListener({ view: View -&gt;
    println(&quot;click view&quot;)
    view.setVisibility(GONE)
})</code></pre>
<p>如果 Lambda 是函数的最后一个参数，可以把 Lambda 写在括号外面（括号后面）：</p>
<pre><code class="kotlin">v.setOnClickListener(){ view: View -&gt;
    println(&quot;click view&quot;)
    view.setVisibility(GONE)
}</code></pre>
<p>如果 Lambda 是函数唯一的参数，可以将括号去掉：</p>
<pre><code class="kotlin">v.setOnClickListener { view: View -&gt;
    println(&quot;click view&quot;)
    view.setVisibility(GONE)
}</code></pre>
<p>如果 Lambda 只有一个参数时，Kotlin 允许省略形参名，直接用 <code>it</code> 代替，此时 -&gt; 也不需要了：</p>
<pre><code class="kotlin">v.setOnClickListener {
    println(&quot;click view&quot;)
    it.setVisibility(GONE)
}</code></pre>
<p>如果 Lambda 参数的类型可以通过上下文推断出来，则可以省略参数类型；如果 Lambda 有多个参数，其中某个参数没有使用，可以使用 <code>_</code> 代替：</p>
<pre><code class="kotlin">fun myfunc(block: (a: String, b: Int) -&gt; Unit) {
    block(&quot;owen&quot;, 1)
}
fun main() {
    myfunc { a, _ -&gt;
        println(a)
    }
}</code></pre>
<p>当一个函数既有有可变长参数和函数参数时，应该将函数参数放在最后一个，这样 Lambda 表达式移到括号外面，就可以不用使用命名参数了。</p>
<p>Lambda 执行体中最后一行代码的值会自动作为 Lambda 表达式的返回值，不需要使用 return 关键字。所以通常的高阶函数（非内联）中的lambda是不允许有return。使用 inline 关键字修饰的高阶函数在 Lambda 表达式中可以使用 return，但是它不是返回 Lambda 表达式，而是返回它所在的函数，这样的 return 语句被称为 <strong>非局部返回</strong>。而匿名函数的 return 用于返回该函数本身。</p>
<pre><code class="kotlin">// Lambda
fun main(){
    val list = listOf&lt;Int&gt;(1, 3, 5, 7, 9)
    list.forEach { 
        println(&quot;item is: $it&quot;)
        return
    }
}
// 执行结果
item is : 1</code></pre>
<pre><code class="kotlin">// 匿名函数
fun main(){
    val list = listOf&lt;Int&gt;(1, 3, 5, 7, 9)
    list.forEach(fun(i): Unit {
        println(&quot;item is : $i&quot;)
        return
    })
}
// 执行结果
item is : 1
item is : 3
item is : 5
item is : 7
item is : 9</code></pre>
<p>上述例子可以看出，Lambda 中的 return 用来返回了它所在的函数（main），所以程序直接结束，只能打印出第一个 item。（forEach函数是内联函数）</p>
<p>如果想要在 Lambda 表达式中使用 return 并达到和匿名函数一样的效果，可以使用限定返回的语法：</p>
<pre><code class="kotlin">// Lambda
fun main(){
    val list = listOf&lt;Int&gt;(1, 3, 5, 7, 9)
    list.forEach { 
        println(&quot;item is: $it&quot;)
        // 限定返回，此时 return 只是返回传给 forEach 函数的 Lambda 表达式
        return@forEach
    }
}
// 执行结果
item is : 1
item is : 3
item is : 5
item is : 7
item is : 9</code></pre>
<p>关于 Kotlin 中的函数类型、高阶函数、Lambda 表达式，就简单写到这里，还有一部分关于内联函数的内容和 Lambda 联系也比较紧密，会在下篇文章进行介绍。</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://kaixue.io/kotlin-lambda/" target="_blank" rel="noopener">Kotlin 的 Lambda 表达式，大多数人学得连皮毛都不算</a></p>
<p><a href="https://www.cnblogs.com/linlinismine/p/9283532.html" target="_blank" rel="noopener">聊聊 Java 8 Lambda 表达式</a></p>
<p><a href="https://www.ituring.com.cn/book/2744" target="_blank" rel="noopener">《Android 第一行代码（第三版）》</a></p>
<p><a href="https://www.phei.com.cn/module/goods/wssd_content.jsp?bookid=51362" target="_blank" rel="noopener">疯狂 Kotlin 讲义</a></p>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/2020/07/11/kotlin-learning-11-inline-function/" data-toggle="tooltip" data-placement="top" title="Kotlin 修炼手册（11）内联函数">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/2020/06/30/summary-of-first-year-after-graduation/" data-toggle="tooltip" data-placement="top" title="毕业一周年小结">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=Kotlin 修炼手册（10）高阶函数与 Lambda&body=Hi,I found this website and thought you might like it http://yoursite.com/2020/07/05/kotlin-learning-10-higher-older-function-lambda/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '3b44fc2839a6c19bfea7',
      clientSecret: 'b96f2147e01e0d906403b6af8518a8e1f04a46de',
      repo: 'blogcomments',
      owner: 'owenleexiaoyu',
      admin: 'owenleexiaoyu',
      id: 'Sun Jul 05 2020 20:00:00 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Kotlin" title="Kotlin">Kotlin</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>





		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/owenleexiaoyu">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          

          
            <li>
              <a target="_blank" href="http://weibo.com/李大鱼呵呵哒">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Owen Lee
          2021
          <br>
          Theme by
          <a href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  

  

  

  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://yoursite.com/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
	</body>
</html>
